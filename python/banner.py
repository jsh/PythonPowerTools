#!/usr/bin/env python3

"""
Name: banner
Description: print large banner on printer
Author: Jonathan Feinberg, jdf@pobox.com
License: bsd
"""

import sys
import os
import argparse

# Constants
DWIDTH = 132
EX_SUCCESS = 0
EX_FAILURE = 1

def main():
    """Main function to parse arguments, process the message, and print the banner."""
    program_name = os.path.basename(sys.argv[0])

    parser = argparse.ArgumentParser(add_help=False, usage=f"usage: {program_name} [-w width] [message ...]")
    parser.add_argument('-w', type=int, help='Set the output width.')
    parser.add_argument('message', nargs='*', default=None, help='The message to be displayed.')
    
    try:
        args = parser.parse_args()
    except:
        sys.exit(EX_FAILURE)
    
    width = DWIDTH
    if args.w is not None:
        if args.w <= 0:
            sys.stderr.write(f"{program_name}: illegal argument for -w option\n")
            sys.exit(EX_FAILURE)
        width = args.w
    
    # Scale characters to the specified width
    printmask = [False] * DWIDTH
    for i in range(width):
        idx = int(i * DWIDTH / width)
        printmask[idx] = True

    # Get the message to print
    message = ' '.join(args.message) if args.message else None
    if not message:
        print("Message: ", end="", file=sys.stderr)
        try:
            message = sys.stdin.readline().strip()
        except IOError:
            sys.exit(EX_FAILURE)

    # The character data and mapping are hardcoded, as in the Perl script.
    # We must port this data exactly.
    ascii_to_table = {
        chr(i): 0 for i in range(128)
    }
    
    ascii_indices = [
        1, 3, 50, 81, 104, 281, 483, 590, 621, 685, 749, 851, 862, 893, 898, 921, 
        1019, 1150, 1200, 1419, 1599, 1744, 1934, 2111, 2235, 2445, 2622, 2659, 0, 2708, 0, 2715, 
        2857, 3072, 3273, 3403, 3560, 3662, 3730, 3785, 3965, 4000, 4015, 4115, 4281, 4314, 4432, 4548, 
        4709, 4790, 4999, 5188, 5397, 5448, 5576, 5710, 5892, 6106, 6257, 0, 0, 0, 0, 0, 
        50, 6503, 6642, 6733, 6837, 6930, 7073, 7157, 7380, 7452, 7499, 7584, 7689, 7702, 7797, 7869, 
        7978, 8069, 8160, 8222, 8381, 8442, 8508, 8605, 8732, 8888, 9016, 0, 0, 0, 0, 0
    ]
    
    # Map the ASCII characters to the data table pointers
    for i in range(32, 128):
        ascii_to_table[chr(i)] = ascii_indices[i-32]

    # The data_table is a flat list of integers.
    data_table = [
        129, 227, 130, 34, 6, 90, 19, 129, 32, 10, 74, 40, 129, 31, 12, 64, 53, 129, 30, 14, 
        54, 65, 129, 30, 14, 53, 67, 129, 30, 14, 54, 65, 129, 31, 12, 64, 53, 129, 32, 10, 
        74, 40, 129, 34, 6, 90, 19, 129, 194, 130, 99, 9, 129, 97, 14, 129, 96, 18, 129, 95, 
        22, 129, 95, 16, 117, 2, 129, 95, 14, 129, 96, 11, 129, 97, 9, 129, 99, 6, 129, 194, 
        129, 87, 4, 101, 4, 131, 82, 28, 131, 87, 4, 101, 4, 133, 82, 28, 131, 87, 4, 101, 
        4, 131, 193, 129, 39, 1, 84, 27, 129, 38, 3, 81, 32, 129, 37, 5, 79, 35, 129, 36, 
        5, 77, 38, 129, 35, 5, 76, 40, 129, 34, 5, 75, 21, 103, 14, 129, 33, 5, 74, 19, 
        107, 11, 129, 32, 5, 73, 17, 110, 9, 129, 32, 4, 73, 16, 112, 7, 129, 31, 4, 72, 
        15, 114, 6, 129, 31, 4, 72, 14, 115, 5, 129, 30, 4, 71, 15, 116, 5, 129, 27, 97, 
        131, 30, 4, 69, 14, 117, 4, 129, 30, 4, 68, 15, 117, 4, 132, 30, 4, 68, 14, 117, 
        4, 129, 27, 97, 131, 30, 5, 65, 15, 116, 5, 129, 31, 4, 65, 14, 116, 4, 129, 31, 
        6, 64, 15, 116, 4, 129, 32, 7, 62, 16, 115, 4, 129, 32, 9, 61, 17, 114, 5, 129, 
        33, 11, 58, 19, 113, 5, 129, 34, 14, 55, 21, 112, 5, 129, 35, 40, 111, 5, 129, 36, 
        38, 110, 5, 129, 37, 35, 109, 5, 129, 38, 32, 110, 3, 129, 40, 27, 111, 1, 129, 193, 
        129, 30, 4, 103, 9, 129, 30, 7, 100, 15, 129, 30, 10, 99, 17, 129, 33, 10, 97, 6, 
        112, 6, 129, 36, 10, 96, 5, 114, 5, 129, 39, 10, 96, 4, 115, 4, 129, 42, 10, 95, 
        4, 116, 4, 129, 45, 10, 95, 3, 117, 3, 129, 48, 10, 95, 3, 117, 3, 129, 51, 10, 
        95, 4, 116, 4, 129, 54, 10, 96, 4, 115, 4, 129, 57, 10, 96, 5, 114, 5, 129, 60, 
        10, 97, 6, 112, 6, 129, 63, 10, 99, 17, 129, 66, 10, 100, 15, 129, 69, 10, 103, 9, 
        129, 39, 9, 72, 10, 129, 36, 15, 75, 10, 129, 35, 17, 78, 10, 129, 33, 6, 48, 6, 
        81, 10, 129, 32, 5, 50, 5, 84, 10, 129, 32, 4, 51, 4, 87, 10, 129, 31, 4, 52, 
        4, 90, 10, 129, 31, 3, 53, 3, 93, 10, 129, 31, 3, 53, 3, 96, 10, 129, 31, 4, 
        52, 4, 99, 10, 129, 32, 4, 51, 4, 102, 10, 129, 32, 5, 50, 5, 105, 10, 129, 33, 
        6, 48, 6, 108, 10, 129, 35, 17, 111, 10, 129, 36, 15, 114, 7, 129, 40, 9, 118, 4, 
        129, 193, 129, 48, 18, 129, 43, 28, 129, 41, 32, 129, 39, 36, 129, 37, 40, 129, 35, 44, 
        129, 34, 46, 129, 33, 13, 68, 13, 129, 32, 9, 73, 9, 129, 32, 7, 75, 7, 129, 31, 
        6, 77, 6, 129, 31, 5, 78, 5, 129, 30, 5, 79, 5, 129, 20, 74, 132, 30, 4, 80, 
        4, 129, 31, 3, 79, 4, 129, 31, 4, 79, 4, 129, 32, 3, 78, 4, 129, 32, 4, 76, 
        6, 129, 33, 4, 74, 7, 129, 34, 4, 72, 8, 129, 35, 5, 72, 7, 129, 37, 5, 73, 
        4, 129, 39, 4, 74, 1, 129, 129, 193, 130, 111, 6, 129, 109, 10, 129, 108, 12, 129, 107, 
        14, 129, 97, 2, 105, 16, 129, 99, 22, 129, 102, 18, 129, 105, 14, 129, 108, 9, 129, 194, 
        130, 63, 25, 129, 57, 37, 129, 52, 47, 129, 48, 55, 129, 44, 63, 129, 41, 69, 129, 38, 
        75, 129, 36, 79, 129, 34, 83, 129, 33, 28, 90, 28, 129, 32, 23, 96, 23, 129, 32, 17, 
        102, 17, 129, 31, 13, 107, 13, 129, 30, 9, 112, 9, 129, 30, 5, 116, 5, 129, 30, 1, 
        120, 1, 129, 194, 130, 30, 1, 120, 1, 129, 30, 5, 116, 5, 129, 30, 9, 112, 9, 129, 
        31, 13, 107, 13, 129, 32, 17, 102, 17, 129, 32, 23, 96, 23, 129, 33, 28, 90, 28, 129, 
        34, 83, 129, 36, 79, 129, 38, 75, 129, 41, 69, 129, 44, 63, 129, 48, 55, 129, 52, 47, 
        129, 57, 37, 129, 63, 25, 129, 194, 129, 80, 4, 130, 80, 4, 129, 68, 2, 80, 4, 94, 
        2, 129, 66, 6, 80, 4, 92, 6, 129, 67, 7, 80, 4, 90, 7, 129, 69, 7, 80, 4, 
        88, 7, 129, 71, 6, 80, 4, 87, 6, 129, 72, 20, 129, 74, 16, 129, 76, 12, 129, 62, 
        40, 131, 76, 12, 129, 74, 16, 129, 72, 20, 129, 71, 6, 80, 4, 87, 6, 129, 69, 7, 
        80, 4, 88, 7, 129, 67, 7, 80, 4, 90, 7, 129, 66, 6, 80, 4, 92, 6, 129, 68, 
        2, 80, 4, 94, 2, 129, 80, 4, 130, 193, 129, 60, 4, 139, 41, 42, 131, 60, 4, 139, 
        193, 130, 34, 6, 129, 32, 10, 129, 31, 12, 129, 30, 14, 129, 20, 2, 28, 16, 129, 22, 
        22, 129, 24, 19, 129, 27, 15, 129, 31, 9, 129, 194, 129, 60, 4, 152, 193, 130, 34, 6, 
        129, 32, 10, 129, 31, 12, 129, 30, 14, 131, 31, 12, 129, 32, 10, 129, 34, 6, 129, 194, 
        129, 30, 4, 129, 30, 7, 129, 30, 10, 129, 33, 10, 129, 36, 10, 129, 39, 10, 129, 42, 
        10, 129, 45, 10, 129, 48, 10, 129, 51, 10, 129, 54, 10, 129, 57, 10, 129, 60, 10, 129, 
        63, 10, 129, 66, 10, 129, 69, 10, 129, 72, 10, 129, 75, 10, 129, 78, 10, 129, 81, 10, 
        129, 84, 10, 129, 87, 10, 129, 90, 10, 129, 93, 10, 129, 96, 10, 129, 99, 10, 129, 102, 
        10, 129, 105, 10, 129, 108, 10, 129, 111, 10, 129, 114, 7, 129, 117, 4, 129, 193, 129, 60, 
        31, 129, 53, 45, 129, 49, 53, 129, 46, 59, 129, 43, 65, 129, 41, 69, 129, 39, 73, 129, 
        37, 77, 129, 36, 79, 129, 35, 15, 101, 15, 129, 34, 11, 106, 11, 129, 33, 9, 109, 9, 
        129, 32, 7, 112, 7, 129, 31, 6, 114, 6, 129, 31, 5, 115, 5, 129, 30, 5, 116, 5, 
        129, 30, 4, 117, 4, 132, 30, 5, 116, 5, 129, 31, 5, 115, 5, 129, 31, 6, 114, 6, 
        129, 32, 7, 112, 7, 129, 33, 9, 109, 9, 129, 34, 11, 106, 11, 129, 35, 15, 101, 15, 
        129, 36, 79, 129, 37, 77, 129, 39, 73, 129, 41, 69, 129, 43, 65, 129, 46, 59, 129, 49, 
        53, 129, 53, 45, 129, 60, 31, 129, 193, 129, 30, 4, 129, 30, 4, 100, 1, 129, 30, 4, 
        100, 3, 129, 30, 4, 100, 5, 129, 30, 76, 129, 30, 78, 129, 30, 80, 129, 30, 82, 129, 
        30, 83, 129, 30, 85, 129, 30, 87, 129, 30, 89, 129, 30, 91, 129, 30, 4, 132, 193, 129, 
        30, 3, 129, 30, 7, 129, 30, 10, 112, 1, 129, 30, 13, 112, 2, 129, 30, 16, 112, 3, 
        129, 30, 18, 111, 5, 129, 30, 21, 111, 6, 129, 30, 23, 112, 6, 129, 30, 14, 47, 8, 
        113, 6, 129, 30, 14, 49, 8, 114, 5, 129, 30, 14, 51, 8, 115, 5, 129, 30, 14, 53, 
        8, 116, 4, 129, 30, 14, 55, 8, 116, 5, 129, 30, 14, 56, 9, 117, 4, 129, 30, 14, 
        57, 9, 117, 4, 129, 30, 14, 58, 10, 117, 4, 129, 30, 14, 59, 10, 117, 4, 129, 30, 
        14, 60, 11, 117, 4, 129, 30, 14, 61, 11, 116, 5, 129, 30, 14, 62, 11, 116, 5, 129, 
        30, 14, 63, 12, 115, 6, 129, 30, 14, 64, 13, 114, 7, 129, 30, 14, 65, 13, 113, 8, 
        129, 30, 14, 65, 15, 111, 9, 129, 30, 14, 66, 16, 109, 11, 129, 30, 14, 67, 17, 107, 
        12, 129, 30, 14, 68, 20, 103, 16, 129, 30, 14, 69, 49, 129, 30, 14, 70, 47, 129, 30, 
        14, 71, 45, 129, 30, 14, 73, 42, 129, 30, 15, 75, 38, 129, 33, 12, 77, 34, 129, 36, 
        10, 79, 30, 129, 40, 6, 82, 23, 129, 44, 3, 86, 15, 129, 47, 1, 129, 193, 129, 129, 
        38, 3, 129, 37, 5, 111, 1, 129, 36, 7, 111, 2, 129, 35, 9, 110, 5, 129, 34, 8, 
        110, 6, 129, 33, 7, 109, 8, 129, 32, 7, 110, 8, 129, 32, 6, 112, 7, 129, 31, 6, 
        113, 6, 129, 31, 5, 114, 6, 129, 30, 5, 115, 5, 129, 30, 5, 116, 4, 129, 30, 4, 
        117, 4, 131, 30, 4, 117, 4, 129, 30, 4, 79, 2, 117, 4, 129, 30, 5, 78, 4, 117, 
        4, 129, 30, 5, 77, 6, 116, 5, 129, 30, 6, 76, 8, 115, 6, 129, 30, 7, 75, 11, 
        114, 6, 129, 30, 8, 73, 15, 112, 8, 129, 31, 9, 71, 19, 110, 9, 129, 31, 11, 68, 
        26, 107, 12, 129, 32, 13, 65, 14, 82, 36, 129, 32, 16, 61, 17, 83, 34, 129, 33, 44, 
        84, 32, 129, 34, 42, 85, 30, 129, 35, 40, 87, 27, 129, 36, 38, 89, 23, 129, 38, 34, 
        92, 17, 129, 40, 30, 95, 11, 129, 42, 26, 129, 45, 20, 129, 49, 11, 129, 193, 129, 49, 
        1, 129, 49, 4, 129, 49, 6, 129, 49, 8, 129, 49, 10, 129, 49, 12, 129, 49, 14, 129, 
        49, 17, 129, 49, 19, 129, 49, 21, 129, 49, 23, 129, 49, 14, 65, 9, 129, 49, 14, 67, 
        9, 129, 49, 14, 69, 9, 129, 49, 14, 71, 10, 129, 49, 14, 74, 9, 129, 49, 14, 76, 
        9, 129, 49, 14, 78, 9, 129, 49, 14, 80, 9, 129, 49, 14, 82, 9, 129, 49, 14, 84, 
        9, 129, 30, 4, 49, 14, 86, 10, 129, 30, 4, 49, 14, 89, 9, 129, 30, 4, 49, 14, 
        91, 9, 129, 30, 4, 49, 14, 93, 9, 129, 30, 74, 129, 30, 76, 129, 30, 78, 129, 30, 
        81, 129, 30, 83, 129, 30, 85, 129, 30, 87, 129, 30, 89, 129, 30, 91, 129, 30, 4, 49, 
        14, 132, 193, 129, 37, 1, 129, 36, 3, 77, 3, 129, 35, 5, 78, 11, 129, 34, 7, 78, 
        21, 129, 33, 7, 79, 29, 129, 32, 7, 79, 38, 129, 32, 6, 80, 4, 92, 29, 129, 31, 
        6, 80, 5, 102, 19, 129, 31, 5, 80, 6, 107, 14, 129, 31, 4, 81, 5, 107, 14, 129, 
        30, 5, 81, 6, 107, 14, 129, 30, 4, 81, 6, 107, 14, 130, 30, 4, 81, 7, 107, 14, 
        129, 30, 4, 80, 8, 107, 14, 130, 30, 5, 80, 8, 107, 14, 129, 30, 5, 79, 9, 107, 
        14, 129, 31, 5, 79, 9, 107, 14, 129, 31, 6, 78, 10, 107, 14, 129, 32, 6, 76, 11, 
        107, 14, 129, 32, 8, 74, 13, 107, 14, 129, 33, 10, 71, 16, 107, 14, 129, 33, 15, 67, 
        19, 107, 14, 129, 34, 51, 107, 14, 129, 35, 49, 107, 14, 129, 36, 47, 107, 14, 129, 37, 
        45, 107, 14, 129, 39, 41, 107, 14, 129, 41, 37, 107, 14, 129, 44, 32, 107, 14, 129, 47, 
        25, 111, 10, 129, 51, 16, 115, 6, 129, 119, 2, 129, 193, 129, 56, 39, 129, 51, 49, 129, 
        47, 57, 129, 44, 63, 129, 42, 67, 129, 40, 71, 129, 38, 75, 129, 37, 77, 129, 35, 81, 
        129, 34, 16, 74, 5, 101, 16, 129, 33, 11, 76, 5, 107, 11, 129, 32, 9, 77, 5, 110, 
        9, 129, 32, 7, 79, 4, 112, 7, 129, 31, 6, 80, 4, 114, 6, 129, 31, 5, 81, 4, 
        115, 5, 129, 30, 5, 82, 4, 116, 5, 129, 30, 4, 82, 4, 116, 5, 129, 30, 4, 82, 
        5, 117, 4, 131, 30, 5, 82, 5, 117, 4, 129, 31, 5, 81, 6, 117, 4, 129, 31, 6, 
        80, 7, 117, 4, 129, 32, 7, 79, 8, 117, 4, 129, 32, 9, 77, 9, 116, 5, 129, 33, 
        11, 75, 11, 116, 4, 129, 34, 16, 69, 16, 115, 5, 129, 35, 49, 114, 5, 129, 37, 46, 
        113, 5, 129, 38, 44, 112, 6, 129, 40, 41, 112, 5, 129, 42, 37, 113, 3, 129, 44, 33, 
        114, 1, 129, 47, 27, 129, 51, 17, 129, 193, 129, 103, 2, 129, 103, 6, 129, 104, 9, 129, 
        105, 12, 129, 106, 15, 129, 107, 14, 135, 30, 10, 107, 14, 129, 30, 17, 107, 14, 129, 
        30, 25, 107, 14, 129, 30, 31, 107, 14, 129, 30, 37, 107, 14, 129, 30, 42, 107, 14, 129, 
        30, 46, 107, 14, 129, 30, 50, 107, 14, 129, 30, 54, 107, 14, 129, 30, 58, 107, 14, 129, 
        59, 32, 107, 14, 129, 64, 30, 107, 14, 129, 74, 23, 107, 14, 129, 81, 18, 107, 14, 129, 
        86, 16, 107, 14, 129, 91, 14, 107, 14, 129, 96, 25, 129, 100, 21, 129, 104, 17, 129, 107, 
        14, 129, 111, 10, 129, 114, 7, 129, 117, 4, 129, 120, 1, 129, 193, 129, 48, 13, 129, 44, 
        21, 129, 42, 26, 129, 40, 30, 92, 12, 129, 38, 34, 88, 20, 129, 36, 37, 86, 25, 129, 
        35, 39, 84, 29, 129, 34, 13, 63, 12, 82, 33, 129, 33, 11, 67, 9, 80, 36, 129, 32, 9, 
        70, 7, 79, 38, 129, 31, 8, 72, 46, 129, 30, 7, 74, 22, 108, 11, 129, 30, 6, 75, 
        19, 111, 9, 129, 30, 5, 75, 17, 113, 7, 129, 30, 5, 74, 16, 114, 6, 129, 30, 4, 
        73, 16, 115, 6, 129, 30, 4, 72, 16, 116, 5, 129, 30, 4, 72, 15, 117, 4, 129, 30, 
        4, 71, 16, 117, 4, 129, 30, 5, 70, 16, 117, 4, 129, 30, 5, 70, 15, 117, 4, 129, 
        30, 6, 69, 15, 116, 5, 129, 30, 7, 68, 17, 115, 5, 129, 31, 6, 67, 16, 114, 6, 
        129, 31, 7, 66, 17, 113, 6, 129, 32, 7, 64, 18, 111, 8, 129, 32, 8, 62, 19, 109, 
        9, 129, 33, 9, 60, 20, 107, 10, 129, 34, 11, 57, 22, 103, 13, 129, 35, 43, 103, 18, 
        129, 36, 41, 103, 18, 129, 38, 38, 103, 18, 129, 39, 35, 103, 18, 129, 41, 31, 129, 43, 
        27, 129, 46, 22, 129, 49, 14, 129, 193, 129, 103, 18, 132, 110, 11, 129, 113, 8, 129, 114, 7, 
        129, 116, 5, 130, 117, 4, 132, 30, 4, 117, 4, 132, 30, 91, 137, 30, 4, 117, 4, 132, 
        117, 4, 132, 116, 5, 130, 114, 7, 129, 113, 8, 129, 110, 11, 129, 103, 18, 132, 193, 129, 
        117, 4, 132, 56, 65, 129, 50, 71, 129, 46, 75, 129, 44, 77, 129, 42, 79, 129, 40, 81, 
        129, 38, 83, 129, 36, 85, 129, 35, 86, 129, 34, 20, 117, 4, 129, 33, 17, 117, 4, 129, 
        32, 15, 117, 4, 129, 32, 13, 117, 4, 129, 31, 12, 129, 31, 10, 129, 31, 9, 129, 30, 
        9, 129, 30, 8, 130, 30, 7, 132, 31, 6, 130, 31, 7, 129, 32, 6, 129, 32, 7, 
        129, 33, 7, 129, 34, 7, 129, 35, 8, 129, 36, 9, 117, 4, 129, 38, 9, 117, 4, 
        129, 40, 10, 117, 4, 129, 42, 12, 117, 4, 129, 44, 77, 129, 46, 75, 129, 50, 71, 129, 
        56, 43, 100, 21, 129, 117, 4, 132, 193, 129, 117, 4, 132, 115, 6, 129, 110, 11, 129, 105, 
        16, 129, 101, 20, 129, 96, 25, 129, 92, 29, 129, 87, 34, 129, 83, 38, 129, 78, 43, 129, 
        74, 47, 129, 70, 42, 117, 4, 129, 65, 42, 117, 4, 129, 60, 43, 117, 4, 129, 56, 42, 
        129, 51, 42, 129, 46, 43, 129, 42, 43, 129, 37, 44, 129, 33, 43, 129, 30, 42, 129, 33, 
        34, 129, 38, 25, 129, 42, 16, 129, 47, 15, 129, 52, 15, 129, 57, 15, 129, 61, 16, 129, 
        66, 16, 129, 71, 16, 129, 76, 16, 129, 80, 16, 129, 85, 16, 117, 4, 129, 90, 16, 117, 
        4, 129, 95, 16, 117, 4, 129, 100, 21, 129, 105, 16, 129, 110, 11, 129, 114, 7, 129, 117, 
        4, 132, 193, 129, 117, 4, 132, 115, 6, 129, 110, 11, 129, 105, 16, 129, 101, 20, 129, 96, 
        25, 129, 92, 29, 129, 87, 34, 129, 83, 38, 129, 78, 43, 129, 74, 47, 129, 70, 42, 117, 
        4, 129, 65, 42, 117, 4, 129, 60, 43, 117, 4, 129, 56, 42, 129, 51, 42, 129, 46, 43, 
        129, 42, 43, 129, 37, 44, 129, 33, 43, 129, 30, 42, 129, 33, 34, 129, 38, 25, 129, 42, 
        16, 129, 47, 15, 129, 52, 15, 129, 57, 15, 129, 61, 16, 129, 65, 17, 129, 60, 27, 129, 
        56, 36, 129, 51, 42, 129, 46, 43, 129, 42, 43, 129, 37, 44, 129, 33, 43, 129, 30, 42, 
        129, 33, 34, 129, 38, 25, 129, 42, 16, 129, 47, 15, 129, 52, 15, 129, 57, 15, 129, 61, 
        16, 129, 66, 16, 129, 71, 16, 129, 76, 16, 129, 80, 16, 129, 85, 16, 117, 4, 129, 90, 
        16, 117, 4, 129, 95, 16, 117, 4, 129, 100, 21, 129, 105, 16, 129, 110, 11, 129, 114, 7, 
        129, 117, 4, 132, 193, 129, 30, 4, 117, 4, 132, 30, 4, 115, 6, 129, 30, 4, 112, 9, 
        129, 30, 6, 109, 12, 129, 30, 9, 106, 15, 129, 30, 11, 103, 18, 129, 30, 14, 100, 21, 
        129, 30, 4, 38, 9, 98, 23, 129, 30, 4, 40, 10, 95, 26, 129, 30, 4, 43, 9, 92, 
        29, 129, 46, 9, 89, 32, 129, 49, 8, 86, 28, 117, 4, 129, 51, 9, 83, 28, 117, 4, 
        129, 54, 9, 80, 28, 117, 4, 129, 57, 8, 77, 28, 117, 4, 129, 59, 9, 74, 28, 129, 
        62, 37, 129, 64, 33, 129, 66, 28, 129, 63, 28, 129, 60, 28, 129, 57, 28, 129, 54, 33, 
        129, 51, 39, 129, 48, 29, 83, 9, 129, 30, 4, 45, 29, 86, 9, 129, 30, 4, 42, 29, 
        89, 9, 129, 30, 4, 39, 29, 92, 8, 129, 30, 4, 36, 29, 94, 9, 129, 30, 32, 97, 
        9, 129, 30, 29, 100, 8, 117, 4, 129, 30, 26, 103, 8, 117, 4, 129, 30, 23, 105, 9, 
        117, 4, 129, 30, 20, 108, 13, 129, 30, 18, 111, 10, 129, 30, 15, 113, 8, 129, 30, 12, 
        116, 5, 129, 30, 9, 117, 4, 129, 30, 6, 117, 4, 129, 30, 4, 117, 4, 132, 193, 129, 
        117, 4, 132, 114, 7, 129, 111, 10, 129, 108, 13, 129, 105, 16, 129, 102, 19, 129, 100, 21, 
        129, 96, 25, 129, 93, 28, 129, 90, 31, 129, 87, 34, 129, 84, 30, 117, 4, 129, 30, 4, 
        81, 30, 117, 4, 129, 30, 4, 78, 30, 117, 4, 129, 30, 4, 75, 30, 117, 4, 129, 30, 
        4, 72, 30, 129, 30, 69, 129, 30, 66, 129, 30, 63, 129, 30, 60, 129, 30, 57, 129, 30, 
        54, 129, 30, 51, 129, 30, 48, 129, 30, 51, 129, 30, 4, 73, 12, 129, 30, 4, 76, 12, 
        129, 30, 4, 80, 12, 129, 30, 4, 83, 12, 129, 87, 12, 129, 90, 12, 117, 4, 129, 94, 
        11, 117, 4, 129, 97, 12, 117, 4, 129, 101, 12, 117, 4, 129, 104, 17, 129, 108, 13, 129, 
        111, 10, 129, 115, 6, 129, 117, 4, 134, 193, 129, 30, 1, 103, 18, 129, 30, 4, 103, 18, 
        129, 30, 7, 103, 18, 129, 30, 9, 103, 18, 129, 30, 12, 110, 11, 129, 30, 15, 113, 8, 
        129, 30, 18, 114, 7, 129, 30, 21, 116, 5, 129, 30, 24, 116, 5, 129, 30, 27, 117, 4, 
        129, 30, 30, 117, 4, 129, 30, 33, 117, 4, 129, 30, 4, 37, 28, 117, 4, 129, 30, 4, 
        40, 28, 117, 4, 129, 30, 4, 42, 29, 117, 4, 129, 30, 4, 45, 29, 117, 4, 129, 30, 4, 
        48, 29, 117, 4, 129, 30, 4, 51, 29, 117, 4, 129, 30, 4, 54, 29, 117, 4, 129, 30, 4, 
        57, 29, 117, 4, 129, 30, 4, 59, 30, 117, 4, 129, 30, 4, 62, 30, 117, 4, 129, 30, 4, 
        65, 30, 117, 4, 129, 30, 4, 68, 30, 117, 4, 129, 30, 4, 71, 30, 117, 4, 129, 30, 4, 
        74, 30, 117, 4, 129, 30, 4, 77, 30, 117, 4, 129, 30, 4, 80, 30, 117, 4, 129, 30, 4, 
        83, 30, 117, 4, 129, 30, 4, 86, 35, 129, 30, 4, 89, 32, 129, 30, 4, 91, 30, 129, 
        30, 4, 94, 27, 129, 30, 5, 97, 24, 129, 30, 5, 100, 21, 129, 30, 7, 103, 18, 129, 
        30, 8, 106, 15, 129, 30, 11, 109, 12, 129, 30, 18, 112, 9, 129, 30, 18, 115, 6, 129, 
        30, 18, 117, 4, 129, 30, 18, 120, 1, 129, 193, 129, 42, 8, 129, 38, 16, 129, 36, 20, 
        129, 34, 24, 71, 5, 129, 33, 26, 69, 10, 129, 32, 28, 68, 13, 129, 31, 30, 68, 14, 
        129, 31, 9, 52, 9, 68, 15, 129, 30, 8, 54, 8, 69, 14, 129, 30, 7, 55, 7, 
        71, 4, 78, 6, 129, 30, 6, 56, 6, 79, 5, 129, 30, 6, 56, 6, 80, 4, 130, 
        31, 5, 56, 5, 80, 4, 129, 31, 5, 56, 5, 79, 5, 129, 32, 5, 55, 5, 78, 
        6, 129, 33, 5, 54, 5, 77, 7, 129, 34, 6, 52, 6, 74, 9, 129, 35, 48, 129, 33, 49, 
        129, 32, 49, 129, 31, 49, 129, 30, 49, 129, 30, 47, 129, 30, 45, 129, 30, 41, 129, 30, 6, 
        129, 30, 4, 129, 30, 3, 129, 30, 2, 129, 193, 129, 30, 4, 117, 4, 130, 31, 90, 136, 
        37, 5, 72, 5, 129, 35, 5, 74, 5, 129, 33, 5, 76, 5, 129, 32, 5, 77, 5, 
        129, 31, 5, 78, 5, 129, 31, 4, 79, 4, 129, 30, 5, 79, 5, 131, 30, 6, 78, 
        6, 129, 30, 7, 77, 7, 129, 31, 8, 75, 8, 129, 31, 11, 72, 11, 129, 32, 15, 67, 
        15, 129, 33, 48, 129, 34, 46, 129, 35, 44, 129, 37, 40, 129, 39, 36, 129, 42, 30, 129, 
        46, 22, 129, 193, 129, 48, 18, 129, 43, 28, 129, 41, 32, 129, 39, 36, 129, 37, 40, 129, 
        35, 44, 129, 34, 46, 129, 33, 13, 68, 13, 129, 32, 9, 73, 9, 129, 32, 7, 75, 7, 
        129, 31, 6, 77, 6, 129, 31, 5, 78, 5, 129, 30, 5, 79, 5, 129, 30, 4, 80, 
        4, 133, 31, 3, 79, 4, 129, 31, 4, 79, 4, 129, 32, 3, 78, 4, 129, 32, 4, 
        76, 6, 129, 33, 4, 74, 7, 129, 34, 4, 72, 8, 129, 35, 5, 72, 7, 129, 37, 
        5, 73, 4, 129, 39, 4, 74, 1, 129, 129, 193, 129, 46, 22, 129, 42, 30, 129, 39, 36, 129, 
        37, 40, 129, 35, 44, 129, 34, 46, 129, 33, 48, 129, 32, 15, 67, 15, 129, 31, 11, 72, 
        11, 129, 31, 8, 75, 8, 129, 30, 7, 77, 7, 129, 30, 6, 78, 6, 129, 30, 5, 
        79, 5, 131, 31, 4, 79, 4, 129, 31, 5, 78, 5, 129, 32, 5, 77, 5, 129, 33, 
        5, 76, 5, 129, 35, 5, 74, 5, 129, 37, 5, 72, 5, 117, 4, 129, 30, 91, 136, 
        30, 4, 130, 193, 129, 48, 18, 129, 43, 28, 129, 41, 32, 129, 39, 36, 129, 37, 40, 129, 
        35, 44, 129, 34, 46, 129, 33, 13, 55, 4, 68, 13, 129, 32, 9, 55, 4, 73, 9, 
        129, 32, 7, 55, 4, 75, 7, 129, 31, 6, 55, 4, 77, 6, 129, 31, 5, 55, 4, 
        78, 5, 129, 30, 5, 55, 4, 79, 5, 129, 30, 4, 55, 4, 80, 4, 132, 30, 4, 
        55, 4, 79, 5, 129, 31, 3, 55, 4, 78, 5, 129, 31, 4, 55, 4, 77, 6, 129, 
        32, 3, 55, 4, 75, 7, 129, 32, 4, 55, 4, 73, 9, 129, 33, 4, 55, 4, 68, 
        13, 129, 34, 4, 55, 25, 129, 35, 5, 55, 24, 129, 37, 5, 55, 22, 129, 39, 4, 55, 
        20, 129, 55, 18, 129, 55, 16, 129, 55, 11, 129, 193, 129, 80, 4, 129, 30, 4, 80, 4, 
        130, 30, 78, 129, 30, 82, 129, 30, 85, 129, 30, 87, 129, 30, 88, 129, 30, 89, 129, 30, 
        90, 130, 30, 4, 80, 4, 115, 6, 129, 30, 4, 80, 4, 117, 4, 129, 80, 4, 105, 
        6, 117, 4, 129, 80, 4, 103, 10, 116, 5, 129, 80, 4, 102, 19, 129, 80, 4, 101, 
        19, 129, 101, 19, 129, 101, 18, 129, 102, 16, 129, 103, 12, 129, 105, 6, 129, 193, 129, 12, 
        10, 59, 11, 129, 9, 16, 55, 19, 129, 7, 20, 53, 23, 129, 6, 7, 23, 5, 32, 
        6, 51, 27, 129, 4, 7, 25, 16, 50, 29, 129, 3, 6, 27, 16, 49, 31, 129, 2, 6, 
        28, 16, 48, 33, 129, 1, 6, 27, 18, 47, 35, 129, 1, 6, 27, 31, 71, 12, 129, 1, 
        5, 26, 15, 44, 10, 75, 8, 129, 1, 5, 25, 14, 45, 7, 77, 7, 129, 1, 5, 
        25, 13, 45, 5, 79, 5, 129, 1, 5, 24, 14, 45, 4, 80, 4, 129, 1, 5, 24, 
        13, 45, 4, 80, 4, 129, 1, 5, 23, 14, 45, 4, 80, 4, 129, 1, 5, 23, 13, 
        45, 4, 80, 4, 129, 1, 6, 22, 13, 45, 5, 79, 5, 129, 1, 6, 21, 14, 45, 7, 
        77, 7, 129, 1, 7, 21, 13, 46, 8, 75, 8, 129, 1, 8, 20, 13, 46, 12, 71, 
        12, 129, 1, 10, 18, 15, 47, 35, 129, 2, 30, 48, 33, 129, 3, 29, 49, 32, 129, 4, 
        27, 50, 31, 129, 5, 25, 51, 27, 80, 2, 86, 4, 129, 7, 21, 53, 23, 80, 3, 
        85, 6, 129, 9, 17, 55, 19, 80, 12, 129, 12, 12, 59, 11, 81, 11, 129, 82, 10, 
        129, 84, 7, 129, 86, 4, 129, 193, 129, 30, 4, 117, 4, 130, 30, 91, 136, 30, 4, 
        72, 5, 129, 30, 4, 74, 5, 129, 75, 5, 129, 76, 5, 129, 76, 6, 129, 77, 6, 
        130, 77, 7, 130, 76, 8, 129, 30, 4, 75, 9, 129, 30, 4, 72, 12, 129, 30, 54, 
        129, 30, 53, 130, 30, 52, 129, 30, 51, 129, 30, 49, 129, 30, 46, 129, 30, 42, 129, 30, 
        4, 130, 193, 129, 30, 4, 80, 4, 129, 30, 4, 80, 4, 100, 6, 129, 30, 54, 98, 
        10, 129, 30, 54, 97, 12, 129, 30, 54, 96, 14, 131, 30, 54, 97, 12, 129, 30, 54, 98, 
        10, 129, 30, 54, 100, 6, 129, 30, 4, 130, 193, 129, 7, 6, 129, 4, 11, 129, 3, 13, 
        129, 2, 14, 129, 1, 15, 130, 1, 3, 6, 9, 129, 1, 3, 7, 6, 129, 1, 3, 
        130, 1, 4, 129, 1, 5, 80, 4, 129, 1, 7, 80, 4, 100, 6, 129, 2, 82, 98, 
        10, 129, 3, 81, 97, 12, 129, 4, 80, 96, 14, 129, 5, 79, 96, 14, 129, 7, 77, 96, 
        14, 129, 10, 74, 97, 12, 129, 14, 70, 98, 10, 129, 19, 65, 100, 6, 129, 193, 129, 30, 
        4, 117, 4, 130, 30, 91, 136, 30, 4, 57, 9, 129, 30, 4, 55, 12, 129, 52, 17, 
        129, 50, 20, 129, 48, 24, 129, 46, 27, 129, 44, 21, 69, 6, 129, 41, 22, 70, 6, 
        80, 4, 129, 30, 4, 39, 21, 72, 6, 80, 4, 129, 30, 4, 36, 22, 73, 11, 129, 
        30, 26, 75, 9, 129, 30, 23, 76, 8, 129, 30, 21, 78, 6, 129, 30, 19, 79, 5, 
        129, 30, 16, 80, 4, 129, 30, 14, 80, 4, 129, 30, 12, 129, 30, 10, 129, 30, 7, 
        129, 30, 5, 129, 30, 4, 130, 193, 129, 30, 4, 117, 4, 130, 30, 91, 136, 30, 4, 
        130, 193, 129, 30, 4, 80, 4, 130, 30, 54, 136, 30, 4, 72, 5, 129, 30, 4, 74, 
        5, 129, 75, 5, 129, 76, 5, 129, 30, 4, 75, 7, 129, 30, 4, 74, 9, 129, 30, 
        54, 132, 30, 53, 129, 30, 52, 129, 30, 51, 129, 30, 48, 129, 30, 4, 72, 5, 129, 
        30, 4, 74, 5, 129, 75, 5, 129, 76, 5, 129, 30, 4, 75, 7, 129, 30, 4, 74, 
        9, 129, 30, 54, 132, 30, 53, 129, 30, 52, 129, 30, 51, 129, 30, 48, 129, 30, 4, 130, 
        193, 129, 30, 4, 80, 4, 130, 30, 54, 136, 30, 4, 72, 5, 129, 30, 4, 74, 5, 
        129, 75, 5, 129, 76, 5, 129, 76, 6, 129, 77, 6, 130, 77, 7, 130, 76, 8, 129, 
        30, 4, 75, 9, 129, 30, 4, 72, 12, 129, 30, 54, 129, 30, 53, 130, 30, 52, 129, 
        30, 51, 129, 30, 49, 129, 30, 46, 129, 30, 42, 129, 30, 4, 130, 193, 129, 48, 18, 
        129, 43, 28, 129, 41, 32, 129, 39, 36, 129, 37, 40, 129, 35, 44, 129, 34, 46, 129, 
        33, 13, 68, 13, 129, 32, 9, 73, 9, 129, 32, 7, 75, 7, 129, 31, 6, 77, 6, 
        129, 31, 5, 78, 5, 129, 30, 5, 79, 5, 129, 30, 4, 80, 4, 132, 30, 5, 79, 
        5, 130, 31, 5, 78, 5, 129, 31, 6, 77, 6, 129, 32, 7, 75, 7, 129, 32, 9, 
        73, 9, 129, 33, 13, 68, 13, 129, 34, 46, 129, 35, 44, 129, 37, 40, 129, 39, 36, 
        129, 41, 32, 129, 43, 28, 129, 48, 18, 129, 193, 129, 1, 3, 80, 4, 130, 1, 83, 
        137, 37, 5, 72, 5, 129, 35, 5, 74, 5, 129, 33, 5, 76, 5, 129, 32, 5, 77, 
        5, 129, 31, 5, 78, 5, 129, 31, 4, 79, 4, 129, 30, 5, 79, 5, 131, 30, 6, 
        78, 6, 129, 30, 7, 77, 7, 129, 31, 8, 75, 8, 129, 31, 11, 72, 11, 129, 32, 
        15, 67, 15, 129, 33, 48, 129, 34, 46, 129, 35, 44, 129, 37, 40, 129, 39, 36, 129, 42, 
        30, 129, 46, 22, 129, 193, 129, 46, 22, 129, 42, 30, 129, 39, 36, 129, 37, 40, 129, 35, 
        44, 129, 34, 46, 129, 33, 48, 129, 32, 15, 67, 15, 129, 31, 11, 72, 11, 129, 31, 8, 
        75, 8, 129, 30, 7, 77, 7, 129, 30, 6, 78, 6, 129, 30, 5, 79, 5, 131, 31, 
        4, 79, 4, 129, 31, 5, 78, 5, 129, 32, 5, 77, 5, 129, 33, 5, 76, 5, 129, 
        35, 5, 74, 5, 129, 37, 5, 72, 5, 129, 1, 83, 136, 1, 3, 80, 4, 130, 193, 
        129, 30, 4, 80, 4, 130, 30, 54, 136, 30, 4, 68, 6, 129, 30, 4, 70, 6, 129, 
        71, 7, 129, 72, 7, 129, 73, 7, 129, 74, 7, 129, 74, 8, 129, 75, 8, 130, 69, 
        15, 129, 67, 17, 129, 66, 18, 129, 65, 19, 130, 65, 18, 130, 66, 16, 129, 67, 13, 
        129, 69, 8, 129, 193, 129, 30, 13, 64, 8, 129, 30, 13, 61, 14, 129, 30, 13, 59, 
        18, 129, 30, 13, 57, 22, 129, 33, 8, 56, 24, 129, 32, 7, 55, 26, 129, 32, 6, 
        54, 28, 129, 31, 6, 53, 16, 77, 6, 129, 31, 5, 53, 14, 79, 4, 129, 30, 5, 
        52, 14, 80, 4, 129, 30, 5, 52, 13, 80, 4, 129, 30, 4, 52, 13, 80, 4, 129, 
        30, 4, 52, 12, 80, 4, 129, 30, 4, 51, 13, 80, 4, 130, 30, 4, 50, 13, 79, 
        5, 129, 30, 4, 50, 13, 78, 5, 129, 30, 5, 49, 14, 77, 6, 129, 31, 4, 49, 
        13, 76, 6, 129, 31, 5, 48, 14, 75, 7, 129, 32, 5, 47, 14, 73, 8, 129, 32, 6, 
        45, 16, 71, 13, 129, 33, 27, 71, 13, 129, 34, 26, 71, 13, 129, 35, 24, 71, 13, 129, 
        37, 20, 129, 39, 16, 129, 43, 9, 129, 193, 129, 80, 4, 131, 41, 56, 129, 37, 60, 129, 
        35, 62, 129, 33, 64, 129, 32, 65, 129, 31, 66, 129, 30, 67, 130, 30, 11, 80, 4, 129, 
        30, 9, 80, 4, 129, 30, 8, 80, 4, 129, 31, 7, 80, 4, 129, 31, 6, 129, 32, 5, 
        129, 33, 5, 129, 35, 4, 129, 38, 3, 129, 193, 129, 80, 4, 130, 42, 42, 129, 38, 46, 
        129, 35, 49, 129, 33, 51, 129, 32, 52, 129, 31, 53, 130, 30, 54, 129, 30, 12, 129, 30, 
        9, 129, 30, 8, 129, 30, 7, 130, 31, 6, 130, 32, 6, 129, 33, 5, 129, 34, 5, 
        129, 35, 5, 80, 4, 129, 37, 5, 80, 4, 129, 30, 54, 136, 30, 4, 130, 193, 129, 80, 
        4, 130, 77, 7, 129, 74, 10, 129, 70, 14, 129, 66, 18, 129, 62, 22, 129, 59, 25, 129, 
        55, 29, 129, 51, 33, 129, 47, 37, 129, 44, 32, 80, 4, 129, 40, 32, 80, 4, 129, 36, 
        32, 129, 32, 33, 129, 30, 31, 129, 33, 24, 129, 36, 17, 129, 40, 12, 129, 44, 12, 129, 
        48, 12, 129, 51, 13, 129, 55, 13, 129, 59, 13, 80, 4, 129, 63, 13, 80, 4, 129, 
        67, 17, 129, 71, 13, 129, 74, 10, 129, 78, 6, 129, 80, 4, 131, 193, 129, 80, 4, 130, 
        77, 7, 129, 74, 10, 129, 70, 14, 129, 66, 18, 129, 62, 22, 129, 59, 25, 129, 55, 29, 
        129, 51, 33, 129, 47, 37, 129, 44, 32, 80, 4, 129, 40, 32, 80, 4, 129, 36, 32, 129, 
        32, 33, 129, 30, 31, 129, 33, 24, 129, 36, 17, 129, 40, 12, 129, 44, 12, 129, 48, 12, 
        129, 51, 13, 129, 55, 13, 129, 59, 13, 80, 4, 129, 63, 13, 80, 4, 129, 67, 17, 
        129, 71, 13, 129, 74, 10, 129, 78, 6, 129, 80, 4, 131, 193, 129, 30, 4, 80, 4, 130, 
        30, 4, 79, 5, 129, 30, 5, 77, 7, 129, 30, 6, 74, 10, 129, 30, 8, 72, 12, 129, 
        30, 11, 69, 15, 129, 30, 13, 67, 17, 129, 30, 4, 37, 8, 64, 20, 129, 30, 4, 39, 
        8, 62, 22, 129, 41, 8, 59, 25, 129, 43, 8, 57, 27, 129, 45, 8, 55, 22, 80, 4, 
        129, 47, 27, 80, 4, 129, 49, 23, 129, 47, 22, 129, 44, 23, 129, 42, 22, 129, 30, 4, 
        39, 27, 129, 30, 4, 37, 31, 129, 30, 27, 62, 8, 129, 30, 25, 64, 8, 129, 30, 22, 
        66, 8, 80, 4, 129, 30, 20, 68, 8, 80, 4, 129, 30, 17, 70, 8, 80, 4, 129, 30, 
        15, 73, 11, 129, 30, 12, 75, 9, 129, 30, 10, 77, 7, 129, 30, 7, 79, 5, 129, 30, 
        5, 80, 4, 129, 30, 4, 80, 4, 130, 193, 129, 4, 5, 80, 4, 129, 2, 9, 80, 4, 
        129, 1, 11, 77, 7, 129, 1, 12, 74, 10, 129, 1, 12, 70, 14, 129, 1, 12, 66, 18, 
        129, 1, 11, 62, 22, 129, 2, 9, 59, 25, 129, 4, 11, 55, 29, 129, 7, 12, 51, 33, 
        129, 10, 12, 47, 37, 129, 14, 12, 44, 32, 80, 4, 129, 17, 13, 40, 32, 80, 4, 129, 
        21, 13, 36, 32, 129, 25, 40, 129, 29, 32, 129, 33, 24, 129, 36, 17, 129, 40, 12, 129, 
        44, 12, 129, 48, 12, 129, 51, 13, 129, 55, 13, 129, 59, 13, 80, 4, 129, 63, 13, 80, 
        4, 129, 67, 17, 129, 71, 13, 129, 74, 10, 129, 78, 6, 129, 80, 4, 131, 193, 
    ]

    # Check for unsupported characters in the message
    char_error = False
    for char in message:
        if char not in ascii_to_table:
            sys.stderr.write(f"{program_name}: The character `{char}' is not in my character set\n")
            char_error = True
    
    if char_error:
        sys.exit(EX_FAILURE)
        
    # Print the banner
    for char in message:
        pc = ascii_to_table[char]
        line = [' '] * DWIDTH
        term = 0
        max_line_len = 0
        line_num = 0

        while not term:
            if not (0 <= pc < len(data_table)):
                sys.stderr.write(f"{program_name}: bad pc {pc}\n")
                sys.exit(EX_FAILURE)
            
            x = data_table[pc] & 0xFF
            
            if x >= 128:
                if x > 192:
                    term += 1
                
                x &= 0x3F
                for _ in range(x):
                    if printmask[line_num]:
                        print(''.join(line)[:max_line_len])
                    line_num += 1

                line = [' '] * DWIDTH
                pc += 1
                
            else:
                y = data_table[pc+1]
                max_line_len = max(max_line_len, x + y)
                for i in range(x, x + y):
                    line[i] = '#'
                pc += 2

    sys.exit(EX_SUCCESS)

if __name__ == "__main__":
    main()
